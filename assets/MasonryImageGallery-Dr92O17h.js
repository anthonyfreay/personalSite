import{a as g,r as u,j as m}from"./index-D1sMahtc.js";import{L as A}from"./styles-BGicBEIR.js";function N(o,t){if(o==null)return{};var e=P(o,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(e[n]=o[n])}return e}function P(o,t){if(o==null)return{};var e={},n=Object.keys(o),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(e[r]=o[r]);return e}function y(){return y=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},y.apply(this,arguments)}function v(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),e.push.apply(e,n)}return e}function C(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?v(Object(e),!0).forEach(function(n){D(o,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(e,n))})}return o}function D(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}const L={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},j=2;class I extends g.Component{constructor(t){super(t),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let e;this.props.breakpointCols&&this.props.breakpointCols.default?e=this.props.breakpointCols.default:e=parseInt(this.props.breakpointCols)||j,this.state={columnCount:e}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const t=window&&window.innerWidth||1/0;let e=this.props.breakpointCols;typeof e!="object"&&(e={default:parseInt(e)||j});let n=1/0,r=e.default||j;for(let s in e){const l=parseInt(s);l>0&&t<=l&&l<n&&(n=l,r=e[s])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){const t=this.state.columnCount,e=new Array(t),n=g.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){const s=r%t;e[s]||(e[s]=[]),e[s].push(n[r])}return e}renderColumns(){const{column:t,columnAttrs:e={},columnClassName:n}=this.props,r=this.itemsInColumns(),s=`${100/r.length}%`;let l=n;l&&typeof l!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof l>"u"&&(l="my-masonry-grid_column"));const a=C(C(C({},t),e),{},{style:C(C({},e.style),{},{width:s}),className:l});return r.map((h,p)=>g.createElement("div",y({},a,{key:p}),h))}logDeprecated(t){console.error("[Masonry]",t)}render(){const t=this.props,{children:e,breakpointCols:n,columnClassName:r,columnAttrs:s,column:l,className:a}=t,h=N(t,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let p=a;return typeof a!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof a>"u"&&(p="my-masonry-grid")),g.createElement("div",y({},h,{className:p}),this.renderColumns())}}I.defaultProps=L;const E="_gallery_w83tu_13",S="_galleryItem_w83tu_20",M="_lightbox_w83tu_30",w={gallery:E,galleryItem:S,lightbox:M},q=u.memo(({horizontalImages:o=[],verticalImages:t=[],images:e=[]})=>{const[n,r]=u.useState(!1),[s,l]=u.useState(0),a=u.useCallback(i=>{l(i),r(!0)},[]),h=u.useCallback(()=>{r(!1)},[]),p=g.useMemo(()=>{if(e.length>0)return e;const i=o.map(d=>({...d,orientation:"horizontal"})),c=t.map(d=>({...d,orientation:"vertical"})),O=[],x=Math.max(i.length,c.length);i.length/x,c.length/x;let b=0,f=0;for(let d=0;d<x*2;d++)b<i.length&&(f>=c.length||b/(i.length||1)<=f/(c.length||1))?(O.push(i[b]),b++):f<c.length&&(O.push(c[f]),f++);return O},[o,t,e]),k=p.map(i=>({...i,src:i.hdSrc})),_={default:4,1100:4,900:2,490:2};return m.jsxs("div",{children:[m.jsx(I,{breakpointCols:_,className:w.gallery,columnClassName:w.galleryItem,children:p.map((i,c)=>m.jsx("div",{onClick:()=>a(c),children:m.jsx(z,{src:i.src,alt:i.alt})},i.src))}),n&&m.jsx(F,{images:k,open:n,activeImage:s,onClose:h,animation:{fade:0}})]})}),z=({src:o,alt:t})=>{const[e,n]=u.useState(!1),r=u.useRef();return u.useEffect(()=>{const s=new IntersectionObserver(l=>{l.forEach(a=>{a.isIntersecting&&(n(!0),s.disconnect())})});return s.observe(r.current),()=>{s.disconnect()}},[]),m.jsx("img",{ref:r,src:e?o:"",alt:t,style:e?{}:{background:"#f6f6f6"}})},F=({images:o,open:t,activeImage:e,onClose:n})=>m.jsx("div",{className:w.lightboxContainer,children:m.jsx(A,{slides:o,open:t,index:e,controller:{closeOnBackdropClick:!0},close:n,className:w.lightbox,animation:{swipe:0}})});export{q as M};
