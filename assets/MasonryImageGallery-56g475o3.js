import{a as d,r as c,j as u}from"./index-XGCrekJJ.js";import{L as w}from"./styles-Ko0ISx7s.js";function O(r,t){if(r==null)return{};var e=x(r,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function x(r,t){if(r==null)return{};var e={},n=Object.keys(r),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(e[o]=r[o]);return e}function f(){return f=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},f.apply(this,arguments)}function b(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)}return e}function p(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?b(Object(e),!0).forEach(function(n){j(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function j(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}const v={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},C=2;class g extends d.Component{constructor(t){super(t),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let e;this.props.breakpointCols&&this.props.breakpointCols.default?e=this.props.breakpointCols.default:e=parseInt(this.props.breakpointCols)||C,this.state={columnCount:e}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const t=window&&window.innerWidth||1/0;let e=this.props.breakpointCols;typeof e!="object"&&(e={default:parseInt(e)||C});let n=1/0,o=e.default||C;for(let s in e){const i=parseInt(s);i>0&&t<=i&&i<n&&(n=i,o=e[s])}o=Math.max(1,parseInt(o)||1),this.state.columnCount!==o&&this.setState({columnCount:o})}itemsInColumns(){const t=this.state.columnCount,e=new Array(t),n=d.Children.toArray(this.props.children);for(let o=0;o<n.length;o++){const s=o%t;e[s]||(e[s]=[]),e[s].push(n[o])}return e}renderColumns(){const{column:t,columnAttrs:e={},columnClassName:n}=this.props,o=this.itemsInColumns(),s=`${100/o.length}%`;let i=n;i&&typeof i!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof i>"u"&&(i="my-masonry-grid_column"));const a=p(p(p({},t),e),{},{style:p(p({},e.style),{},{width:s}),className:i});return o.map((m,l)=>d.createElement("div",f({},a,{key:l}),m))}logDeprecated(t){console.error("[Masonry]",t)}render(){const t=this.props,{children:e,breakpointCols:n,columnClassName:o,columnAttrs:s,column:i,className:a}=t,m=O(t,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let l=a;return typeof a!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof a>"u"&&(l="my-masonry-grid")),d.createElement("div",f({},m,{className:l}),this.renderColumns())}}g.defaultProps=v;const I="_gallery_9e2ut_13",k="_galleryItem_9e2ut_18",_="_lightbox_9e2ut_28",h={gallery:I,galleryItem:k,lightbox:_},L=c.memo(({images:r})=>{const[t,e]=c.useState(!1),[n,o]=c.useState(0),s=c.useCallback(l=>{o(l),e(!0)},[]),i=c.useCallback(()=>{e(!1)},[]),a=r.map(l=>({...l,src:l.hdSrc})),m={default:4,1100:4,900:3,490:2};return u.jsxs("div",{children:[u.jsx(g,{breakpointCols:m,className:h.gallery,columnClassName:h.galleryItem,children:r.map((l,y)=>u.jsx("div",{onClick:()=>s(y),children:u.jsx(N,{src:l.src,alt:l.alt})},l.src))}),t&&u.jsx(P,{images:a,open:t,activeImage:n,onClose:i,animation:{fade:0}})]})}),N=({src:r,alt:t})=>{const[e,n]=c.useState(!1),o=c.useRef();return c.useEffect(()=>{const s=new IntersectionObserver(i=>{i.forEach(a=>{a.isIntersecting&&(n(!0),s.disconnect())})});return s.observe(o.current),()=>{s.disconnect()}},[]),u.jsx("img",{ref:o,src:e?r:"",alt:t,style:e?{}:{background:"#f6f6f6"}})},P=({images:r,open:t,activeImage:e,onClose:n})=>u.jsx("div",{className:h.lightboxContainer,children:u.jsx(w,{slides:r,open:t,index:e,controller:{closeOnBackdropClick:!0},close:n,className:h.lightbox,animation:{swipe:0}})});export{L as M};
